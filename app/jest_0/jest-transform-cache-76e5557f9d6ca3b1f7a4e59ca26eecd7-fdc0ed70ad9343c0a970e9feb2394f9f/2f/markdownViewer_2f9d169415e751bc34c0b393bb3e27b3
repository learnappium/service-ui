b2425860f77419b0aa794caf00d93f3f
'use strict';Object.defineProperty(exports, "__esModule", { value: true });exports.MarkdownViewer = undefined;var _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);var _createClass2 = require('babel-runtime/helpers/createClass');var _createClass3 = _interopRequireDefault(_createClass2);var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);var _inherits2 = require('babel-runtime/helpers/inherits');var _inherits3 = _interopRequireDefault(_inherits2);var _class, _temp; /*
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * Copyright 2017 EPAM Systems
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * This file is part of EPAM Report Portal.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * https://github.com/reportportal/service-ui
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * Report Portal is free software: you can redistribute it and/or modify
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * it under the terms of the GNU General Public License as published by
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * the Free Software Foundation, either version 3 of the License, or
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * (at your option) any later version.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * Report Portal is distributed in the hope that it will be useful,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * but WITHOUT ANY WARRANTY; without even the implied warranty of
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * GNU General Public License for more details.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * You should have received a copy of the GNU General Public License
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * along with Report Portal.  If not, see <http://www.gnu.org/licenses/>.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    */

var _react = require('react');var _react2 = _interopRequireDefault(_react);
var _htmlReactParser = require('html-react-parser');var _htmlReactParser2 = _interopRequireDefault(_htmlReactParser);
var _propTypes = require('prop-types');var _propTypes2 = _interopRequireDefault(_propTypes);
var _bind = require('classnames/bind');var _bind2 = _interopRequireDefault(_bind);
var _markdownViewer = require('./markdownViewer.scss');var _markdownViewer2 = _interopRequireDefault(_markdownViewer);
var _singletonMarkdownObject = require('../singletonMarkdownObject');function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

var cx = _bind2.default.bind(_markdownViewer2.default);var

MarkdownViewer = exports.MarkdownViewer = (_temp = _class = function (_Component) {(0, _inherits3.default)(MarkdownViewer, _Component);








  function MarkdownViewer(props) {(0, _classCallCheck3.default)(this, MarkdownViewer);var _this = (0, _possibleConstructorReturn3.default)(this, (MarkdownViewer.__proto__ || (0, _getPrototypeOf2.default)(MarkdownViewer)).call(this,
    props));_this.updateElements = function () {return _this.__updateElements__REACT_HOT_LOADER__.apply(_this, arguments);};_this.escapeHtml = function () {return _this.__escapeHtml__REACT_HOT_LOADER__.apply(_this, arguments);};_this.indentSpaces = function () {return _this.__indentSpaces__REACT_HOT_LOADER__.apply(_this, arguments);};
    _this.simpleMDE = _singletonMarkdownObject.SingletonMarkdownObject.getInstance();return _this;
  }(0, _createClass3.default)(MarkdownViewer, [{ key: '__indentSpaces__REACT_HOT_LOADER__', value: function __indentSpaces__REACT_HOT_LOADER__() {return this.__indentSpaces__REACT_HOT_LOADER__.apply(this, arguments);} }, { key: '__escapeHtml__REACT_HOT_LOADER__', value: function __escapeHtml__REACT_HOT_LOADER__() {return this.__escapeHtml__REACT_HOT_LOADER__.apply(this, arguments);} }, { key: '__updateElements__REACT_HOT_LOADER__', value: function __updateElements__REACT_HOT_LOADER__() {return this.__updateElements__REACT_HOT_LOADER__.apply(this, arguments);} }, { key: 'componentDidMount', value: function componentDidMount()
    {
      this.updateElements();
    } }, { key: 'componentDidUpdate', value: function componentDidUpdate()
    {
      this.updateElements();
    } }, { key: '__updateElements__REACT_HOT_LOADER__', value: function __updateElements__REACT_HOT_LOADER__() {return this.__updateElements__REACT_HOT_LOADER__.apply(this, arguments);} }, { key: '__updateElements__REACT_HOT_LOADER__', value: function __updateElements__REACT_HOT_LOADER__()
    {var _this2 = this;
      this.container.querySelectorAll('img').forEach(function (elem) {
        var img = elem;
        img.onload = function () {
          _this2.props.onResize();
        };
      });
      this.container.querySelectorAll('a').forEach(function (elem) {
        elem.setAttribute('target', '_blank');
      });
      this.container.querySelectorAll('code').forEach(function (elem) {
        var element = elem;
        element.innerHTML = elem.textContent;
      });
    } }, { key: '__escapeHtml__REACT_HOT_LOADER__', value: function __escapeHtml__REACT_HOT_LOADER__() {return this.__escapeHtml__REACT_HOT_LOADER__.apply(this, arguments);} }, { key: '__escapeHtml__REACT_HOT_LOADER__', value: function __escapeHtml__REACT_HOT_LOADER__(
    string) {return string.
      replace(/&/g, '&amp;').
      replace(/</g, '&lt;');} }, { key: '__indentSpaces__REACT_HOT_LOADER__', value: function __indentSpaces__REACT_HOT_LOADER__() {return this.__indentSpaces__REACT_HOT_LOADER__.apply(this, arguments);} }, { key: '__indentSpaces__REACT_HOT_LOADER__', value: function __indentSpaces__REACT_HOT_LOADER__(
    string) {return string.replace(/^ +/gm, function (str) {return str.replace(/ /g, '&nbsp;');});} }, { key: 'render', value: function render()

    {var _this3 = this;
      return (
        _react2.default.createElement('div', { ref: function ref(container) {_this3.container = container;}, className: cx('markdown-viewer') },
          (0, _htmlReactParser2.default)(this.simpleMDE.markdown(this.indentSpaces(this.escapeHtml(this.props.value)).replace('_', '&#95;')))));


    } }]);return MarkdownViewer;}(_react.Component), _class.propTypes = { value: _propTypes2.default.string, onResize: _propTypes2.default.func }, _class.defaultProps = { value: '', onResize: function onResize() {} }, _temp);;var _temp2 = function () {if (typeof __REACT_HOT_LOADER__ === 'undefined') {return;}__REACT_HOT_LOADER__.register(cx, 'cx', '/volumeC/workspace/service-ui - RELEASE/src/github.com/reportportal/service-ui/app/src/components/main/markdown/markdownViewer/markdownViewer.jsx');__REACT_HOT_LOADER__.register(MarkdownViewer, 'MarkdownViewer', '/volumeC/workspace/service-ui - RELEASE/src/github.com/reportportal/service-ui/app/src/components/main/markdown/markdownViewer/markdownViewer.jsx');}();;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hcmtkb3duVmlld2VyLmpzeCJdLCJuYW1lcyI6WyJjeCIsImNsYXNzTmFtZXMiLCJiaW5kIiwic3R5bGVzIiwiTWFya2Rvd25WaWV3ZXIiLCJwcm9wcyIsInNpbXBsZU1ERSIsIlNpbmdsZXRvbk1hcmtkb3duT2JqZWN0IiwiZ2V0SW5zdGFuY2UiLCJ1cGRhdGVFbGVtZW50cyIsImNvbnRhaW5lciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZWxlbSIsImltZyIsIm9ubG9hZCIsIm9uUmVzaXplIiwic2V0QXR0cmlidXRlIiwiZWxlbWVudCIsImlubmVySFRNTCIsInRleHRDb250ZW50Iiwic3RyaW5nIiwicmVwbGFjZSIsInN0ciIsIm1hcmtkb3duIiwiaW5kZW50U3BhY2VzIiwiZXNjYXBlSHRtbCIsInZhbHVlIiwiQ29tcG9uZW50IiwicHJvcFR5cGVzIiwiUHJvcFR5cGVzIiwiZnVuYyIsImRlZmF1bHRQcm9wcyJdLCJtYXBwaW5ncyI6Im16QkFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBcUJBLDhCO0FBQ0Esb0Q7QUFDQSx1QztBQUNBLHVDO0FBQ0EsdUQ7QUFDQSxxRTs7QUFFQSxJQUFNQSxLQUFLQyxlQUFXQyxJQUFYLENBQWdCQyx3QkFBaEIsQ0FBWCxDOztBQUVhQyxjLFdBQUFBLGM7Ozs7Ozs7OztBQVNYLDBCQUFZQyxLQUFaLEVBQW1CO0FBQ1hBLFNBRFc7QUFFakIsVUFBS0MsU0FBTCxHQUFpQkMsaURBQXdCQyxXQUF4QixFQUFqQixDQUZpQjtBQUdsQixHO0FBQ21CO0FBQ2xCLFdBQUtDLGNBQUw7QUFDRCxLO0FBQ29CO0FBQ25CLFdBQUtBLGNBQUw7QUFDRCxLO0FBQ3NCO0FBQ3JCLFdBQUtDLFNBQUwsQ0FBZUMsZ0JBQWYsQ0FBZ0MsS0FBaEMsRUFBdUNDLE9BQXZDLENBQStDLFVBQUNDLElBQUQsRUFBVTtBQUN2RCxZQUFNQyxNQUFNRCxJQUFaO0FBQ0FDLFlBQUlDLE1BQUosR0FBYSxZQUFNO0FBQ2pCLGlCQUFLVixLQUFMLENBQVdXLFFBQVg7QUFDRCxTQUZEO0FBR0QsT0FMRDtBQU1BLFdBQUtOLFNBQUwsQ0FBZUMsZ0JBQWYsQ0FBZ0MsR0FBaEMsRUFBcUNDLE9BQXJDLENBQTZDLFVBQUNDLElBQUQsRUFBVTtBQUNyREEsYUFBS0ksWUFBTCxDQUFrQixRQUFsQixFQUE0QixRQUE1QjtBQUNELE9BRkQ7QUFHQSxXQUFLUCxTQUFMLENBQWVDLGdCQUFmLENBQWdDLE1BQWhDLEVBQXdDQyxPQUF4QyxDQUFnRCxVQUFDQyxJQUFELEVBQVU7QUFDeEQsWUFBTUssVUFBVUwsSUFBaEI7QUFDQUssZ0JBQVFDLFNBQVIsR0FBb0JOLEtBQUtPLFdBQXpCO0FBQ0QsT0FIRDtBQUlELEs7QUFDWUMsVSxVQUFVQTtBQUNwQkMsYUFEb0IsQ0FDWixJQURZLEVBQ04sT0FETTtBQUVwQkEsYUFGb0IsQ0FFWixJQUZZLEVBRU4sTUFGTSxDO0FBR1JELFUsVUFBVUEsT0FBT0MsT0FBUCxDQUFlLE9BQWYsRUFBd0IsdUJBQU9DLElBQUlELE9BQUosQ0FBWSxJQUFaLEVBQWtCLFFBQWxCLENBQVAsRUFBeEIsQzs7QUFFaEI7QUFDUDtBQUNFLCtDQUFLLEtBQUssYUFBQ1osU0FBRCxFQUFlLENBQUUsT0FBS0EsU0FBTCxHQUFpQkEsU0FBakIsQ0FBNkIsQ0FBeEQsRUFBMEQsV0FBV1YsR0FBRyxpQkFBSCxDQUFyRTtBQUNJLHlDQUFPLEtBQUtNLFNBQUwsQ0FBZWtCLFFBQWYsQ0FBd0IsS0FBS0MsWUFBTCxDQUFrQixLQUFLQyxVQUFMLENBQWdCLEtBQUtyQixLQUFMLENBQVdzQixLQUEzQixDQUFsQixFQUFxREwsT0FBckQsQ0FBNkQsR0FBN0QsRUFBa0UsT0FBbEUsQ0FBeEIsQ0FBUCxDQURKLENBREY7OztBQUtELEssNkJBN0NpQ00sZ0IsVUFDM0JDLFMsR0FBWSxFQUNqQkYsT0FBT0csb0JBQVVULE1BREEsRUFFakJMLFVBQVVjLG9CQUFVQyxJQUZILEUsU0FJWkMsWSxHQUFlLEVBQ3BCTCxPQUFPLEVBRGEsRUFFcEJYLFVBQVUsb0JBQU0sQ0FBRSxDQUZFLEUsNEhBUGxCaEIsRSwyTEFFT0ksYyIsImZpbGUiOiJtYXJrZG93blZpZXdlci5qc3giLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IDIwMTcgRVBBTSBTeXN0ZW1zXG4gKlxuICpcbiAqIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIEVQQU0gUmVwb3J0IFBvcnRhbC5cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9yZXBvcnRwb3J0YWwvc2VydmljZS11aVxuICpcbiAqIFJlcG9ydCBQb3J0YWwgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gKiAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuICpcbiAqIFJlcG9ydCBQb3J0YWwgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuICpcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gKiBhbG9uZyB3aXRoIFJlcG9ydCBQb3J0YWwuICBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4gKi9cblxuaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQYXJzZXIgZnJvbSAnaHRtbC1yZWFjdC1wYXJzZXInO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMvYmluZCc7XG5pbXBvcnQgc3R5bGVzIGZyb20gJy4vbWFya2Rvd25WaWV3ZXIuc2Nzcyc7XG5pbXBvcnQgeyBTaW5nbGV0b25NYXJrZG93bk9iamVjdCB9IGZyb20gJy4uL3NpbmdsZXRvbk1hcmtkb3duT2JqZWN0JztcblxuY29uc3QgY3ggPSBjbGFzc05hbWVzLmJpbmQoc3R5bGVzKTtcblxuZXhwb3J0IGNsYXNzIE1hcmtkb3duVmlld2VyIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICB2YWx1ZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBvblJlc2l6ZTogUHJvcFR5cGVzLmZ1bmMsXG4gIH07XG4gIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgdmFsdWU6ICcnLFxuICAgIG9uUmVzaXplOiAoKSA9PiB7fSxcbiAgfTtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zaW1wbGVNREUgPSBTaW5nbGV0b25NYXJrZG93bk9iamVjdC5nZXRJbnN0YW5jZSgpO1xuICB9XG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMudXBkYXRlRWxlbWVudHMoKTtcbiAgfVxuICBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgdGhpcy51cGRhdGVFbGVtZW50cygpO1xuICB9XG4gIHVwZGF0ZUVsZW1lbnRzID0gKCkgPT4ge1xuICAgIHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZycpLmZvckVhY2goKGVsZW0pID0+IHtcbiAgICAgIGNvbnN0IGltZyA9IGVsZW07XG4gICAgICBpbWcub25sb2FkID0gKCkgPT4ge1xuICAgICAgICB0aGlzLnByb3BzLm9uUmVzaXplKCk7XG4gICAgICB9O1xuICAgIH0pO1xuICAgIHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2EnKS5mb3JFYWNoKChlbGVtKSA9PiB7XG4gICAgICBlbGVtLnNldEF0dHJpYnV0ZSgndGFyZ2V0JywgJ19ibGFuaycpO1xuICAgIH0pO1xuICAgIHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2NvZGUnKS5mb3JFYWNoKChlbGVtKSA9PiB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gZWxlbTtcbiAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gZWxlbS50ZXh0Q29udGVudDtcbiAgICB9KTtcbiAgfTtcbiAgZXNjYXBlSHRtbCA9IHN0cmluZyA9PiBzdHJpbmdcbiAgICAucmVwbGFjZSgvJi9nLCAnJmFtcDsnKVxuICAgIC5yZXBsYWNlKC88L2csICcmbHQ7Jyk7XG4gIGluZGVudFNwYWNlcyA9IHN0cmluZyA9PiBzdHJpbmcucmVwbGFjZSgvXiArL2dtLCBzdHIgPT4gc3RyLnJlcGxhY2UoLyAvZywgJyZuYnNwOycpKTtcblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgcmVmPXsoY29udGFpbmVyKSA9PiB7IHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyOyB9fSBjbGFzc05hbWU9e2N4KCdtYXJrZG93bi12aWV3ZXInKX0+XG4gICAgICAgIHsgUGFyc2VyKHRoaXMuc2ltcGxlTURFLm1hcmtkb3duKHRoaXMuaW5kZW50U3BhY2VzKHRoaXMuZXNjYXBlSHRtbCh0aGlzLnByb3BzLnZhbHVlKSkucmVwbGFjZSgnXycsICcmIzk1OycpKSkgfVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufVxuIl19